<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin - XLVIII Regional Decembrino | JJFUTBOL</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, sans-serif;
      background: #f0f4f8;
      padding: 20px;
      color: #222;
    }
    .container {
      max-width: 900px;
      margin: auto;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h2 {
      color: #c00;
      text-align: center;
    }
    .dia {
      margin: 25px 0;
      padding: 15px;
      background: #fff;
      border-radius: 8px;
      border: 1px solid #ddd;
    }
    .dia h3 {
      background: #eef7ff;
      padding: 8px 12px;
      border-left: 4px solid #007bff;
      margin-bottom: 12px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .dia h3::after {
      content: "+";
      font-weight: bold;
    }
    .dia.open h3::after {
      content: "‚àí";
    }
    .partido {
      display: flex;
      align-items: center;
      padding: 10px;
      background: #fafafa;
      margin: 6px 0;
      border-radius: 6px;
      border: 1px solid #eee;
    }
    .equipo { font-weight: bold; }
    .vs { margin: 0 10px; color: #666; }
    .goles input {
      width: 50px;
      padding: 4px;
      text-align: center;
      margin: 0 5px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    .guardar, .editar {
      margin-left: 10px;
      padding: 4px 10px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9em;
    }
    .guardar { background: #28a745; color: white; }
    .editar { background: #ffc107; color: black; }
    .estado { margin-left: 10px; font-size: 0.9em; color: #666; }
    .acciones-admin {
      text-align: center;
      margin: 25px 0;
      padding: 15px;
      background: #ffebee;
      border-radius: 8px;
    }
    .acciones-admin input {
      padding: 6px;
      margin: 0 10px;
    }
    .link-tabla {
      display: inline-block;
      margin-top: 10px;
      padding: 8px 15px;
      background: #007bff;
      color: white;
      text-decoration: none;
      border-radius: 4px;
    }
    .link-tabla:hover {
      background: #0056b3;
    }
  </style>
</head>
<body>

<div class="container">
  <h2>üîê Panel de Admin - Resultados del Torneo</h2>
  <input type="password" id="pass" placeholder="Contrase√±a" style="padding:8px; margin-bottom:15px;" />
  <button onclick="verificarPass()">Entrar</button>

  <div id="panel" style="display:none; margin-top:20px;">
    <p style="text-align:center; color:#c00; font-weight:bold;">Ingresa los goles y guarda cada partido</p>

    <!-- D√≠a 20 -->
    <div class="dia" id="dia20">
      <h3 onclick="toggleDia('dia20')">üìÖ 20 DICIEMBRE 2025</h3>
      <div class="partido" data-local="BARRA DE TECOANAPA" data-visita="PLAYA AZUL">
        <span class="equipo">BARRA DE TECOANAPA</span>
        <span class="vs">VS</span>
        <span class="equipo">PLAYA AZUL</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
      <div class="partido" data-local="OMETEPEC FC" data-visita="LA YEGUADA">
        <span class="equipo">OMETEPEC FC</span>
        <span class="vs">VS</span>
        <span class="equipo">LA YEGUADA</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
      <div class="partido" data-local="CD JUCHITAN" data-visita="SAN NICOLAS">
        <span class="equipo">CD JUCHITAN</span>
        <span class="vs">VS</span>
        <span class="equipo">SAN NICOLAS</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
    </div>

    <!-- D√≠a 21 -->
    <div class="dia" id="dia21">
      <h3 onclick="toggleDia('dia21')">üìÖ 21 DICIEMBRE 2025</h3>
      <div class="partido" data-local="CD COPALA" data-visita="MACHINE POWER">
        <span class="equipo">CD COPALA</span>
        <span class="vs">VS</span>
        <span class="equipo">MACHINE POWER</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
      <div class="partido" data-local="CD POZAHUALCO" data-visita="LA GUADALUPE">
        <span class="equipo">CD POZAHUALCO</span>
        <span class="vs">VS</span>
        <span class="equipo">LA GUADALUPE</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
      <div class="partido" data-local="CD POLYMAR" data-visita="JUVENTUS">
        <span class="equipo">CD POLYMAR</span>
        <span class="vs">VS</span>
        <span class="equipo">JUVENTUS</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
      <div class="partido" data-local="UNION MARQUELIA" data-visita="UNION SLAGRO">
        <span class="equipo">UNION MARQUELIA</span>
        <span class="vs">VS</span>
        <span class="equipo">UNION SLAGRO</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
      <div class="partido" data-local="CDM" data-visita="CD ISLALTEPEC">
        <span class="equipo">CDM</span>
        <span class="vs">VS</span>
        <span class="equipo">CD ISLALTEPEC</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
    </div>

    <!-- D√≠a 22 -->
    <div class="dia" id="dia22">
      <h3 onclick="toggleDia('dia22')">üìÖ 22 DICIEMBRE 2025</h3>
      <div class="partido" data-local="PLAYA AZUL" data-visita="CD POZAHUALCO">
        <span class="equipo">PLAYA AZUL</span>
        <span class="vs">VS</span>
        <span class="equipo">CD POZAHUALCO</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
      <div class="partido" data-local="BACHILLERES FC" data-visita="SAN NICOLAS">
        <span class="equipo">BACHILLERES FC</span>
        <span class="vs">VS</span>
        <span class="equipo">SAN NICOLAS</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
      <div class="partido" data-local="CD INDEPENDIENTE" data-visita="CD ISLALTEPEC">
        <span class="equipo">CD INDEPENDIENTE</span>
        <span class="vs">VS</span>
        <span class="equipo">CD ISLALTEPEC</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
      <div class="partido" data-local="OMETEPEC FC" data-visita="AGUA ZARCA">
        <span class="equipo">OMETEPEC FC</span>
        <span class="vs">VS</span>
        <span class="equipo">AGUA ZARCA</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
      <div class="partido" data-local="BARRA DE TECOANAPA" data-visita="LA GUADALUPE">
        <span class="equipo">BARRA DE TECOANAPA</span>
        <span class="vs">VS</span>
        <span class="equipo">LA GUADALUPE</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
    </div>

    <!-- D√≠a 23 -->
    <div class="dia" id="dia23">
      <h3 onclick="toggleDia('dia23')">üìÖ 23 DICIEMBRE 2025</h3>
      <div class="partido" data-local="UNION MARQUELIA" data-visita="BACHILLERES FC">
        <span class="equipo">UNION MARQUELIA</span>
        <span class="vs">VS</span>
        <span class="equipo">BACHILLERES FC</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
      <div class="partido" data-local="CD COPALA" data-visita="CD ISLALTEPEC">
        <span class="equipo">CD COPALA</span>
        <span class="vs">VS</span>
        <span class="equipo">CD ISLALTEPEC</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
      <div class="partido" data-local="MACHINE POWER" data-visita="CDM">
        <span class="equipo">MACHINE POWER</span>
        <span class="vs">VS</span>
        <span class="equipo">CDM</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
      <div class="partido" data-local="CD POLYMAR" data-visita="AGUA ZARCA">
        <span class="equipo">CD POLYMAR</span>
        <span class="vs">VS</span>
        <span class="equipo">AGUA ZARCA</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
      <div class="partido" data-local="CD JUCHITAN" data-visita="UNION SLAGRO">
        <span class="equipo">CD JUCHITAN</span>
        <span class="vs">VS</span>
        <span class="equipo">UNION SLAGRO</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
    </div>

    <!-- D√≠a 24 -->
    <div class="dia" id="dia24">
      <h3 onclick="toggleDia('dia24')">üìÖ 24 DICIEMBRE 2025</h3>
      <div class="partido" data-local="LA YEGUADA" data-visita="CD POLYMAR">
        <span class="equipo">LA YEGUADA</span>
        <span class="vs">VS</span>
        <span class="equipo">CD POLYMAR</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
      <div class="partido" data-local="CD COPALA" data-visita="CDM">
        <span class="equipo">CD COPALA</span>
        <span class="vs">VS</span>
        <span class="equipo">CDM</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
      <div class="partido" data-local="SAN NICOLAS" data-visita="UNION MARQUELIA">
        <span class="equipo">SAN NICOLAS</span>
        <span class="vs">VS</span>
        <span class="equipo">UNION MARQUELIA</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
      <div class="partido" data-local="CD JUCHITAN" data-visita="BACHILLERES FC">
        <span class="equipo">CD JUCHITAN</span>
        <span class="vs">VS</span>
        <span class="equipo">BACHILLERES FC</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
    </div>

    <!-- D√≠a 26 -->
    <div class="dia" id="dia26">
      <h3 onclick="toggleDia('dia26')">üìÖ 26 DICIEMBRE 2025</h3>
      <div class="partido" data-local="CD COPALA" data-visita="CD INDEPENDIENTE">
        <span class="equipo">CD COPALA</span>
        <span class="vs">VS</span>
        <span class="equipo">CD INDEPENDIENTE</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
      <div class="partido" data-local="LA YEGUADA" data-visita="AGUA ZARCA">
        <span class="equipo">LA YEGUADA</span>
        <span class="vs">VS</span>
        <span class="equipo">AGUA ZARCA</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
      <div class="partido" data-local="OMETEPEC FC" data-visita="JUVENTUS">
        <span class="equipo">OMETEPEC FC</span>
        <span class="vs">VS</span>
        <span class="equipo">JUVENTUS</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
    </div>

    <!-- D√≠a 28 -->
    <div class="dia" id="dia28">
      <h3 onclick="toggleDia('dia28')">üìÖ 28 DICIEMBRE 2025</h3>
      <div class="partido" data-local="SAN NICOLAS" data-visita="UNION SLAGRO">
        <span class="equipo">SAN NICOLAS</span>
        <span class="vs">VS</span>
        <span class="equipo">UNION SLAGRO</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
      <div class="partido" data-local="OMETEPEC FC" data-visita="JUVENTUS">
        <span class="equipo">OMETEPEC FC</span>
        <span class="vs">VS</span>
        <span class="equipo">JUVENTUS</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
      <div class="partido" data-local="LA YEGUADA" data-visita="AGUA ZARCA">
        <span class="equipo">LA YEGUADA</span>
        <span class="vs">VS</span>
        <span class="equipo">AGUA ZARCA</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
      <div class="partido" data-local="MACHINE POWER" data-visita="CD INDEPENDIENTE">
        <span class="equipo">MACHINE POWER</span>
        <span class="vs">VS</span>
        <span class="equipo">CD INDEPENDIENTE</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
      <div class="partido" data-local="BARRA DE TECOANAPA" data-visita="CD POZAHUALCO">
        <span class="equipo">BARRA DE TECOANAPA</span>
        <span class="vs">VS</span>
        <span class="equipo">CD POZAHUALCO</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
    </div>

    <!-- ELIMINATORIAS: 29, 30, 31 -->
    <div class="dia" id="dia29">
      <h3 onclick="toggleDia('dia29')">üèÜ SEMIFINALES - 29 DICIEMBRE 2025</h3>
      <div class="partido" data-local="GANADOR GRUPO A" data-visita="GANADOR GRUPO C">
        <span class="equipo">GANADOR GRUPO A</span>
        <span class="vs">VS</span>
        <span class="equipo">GANADOR GRUPO C</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
      <div class="partido" data-local="GANADOR GRUPO B" data-visita="GANADOR GRUPO D">
        <span class="equipo">GANADOR GRUPO B</span>
        <span class="vs">VS</span>
        <span class="equipo">GANADOR GRUPO D</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
    </div>

    <div class="dia" id="dia30">
      <h3 onclick="toggleDia('dia30')">ü•á FINAL - 30 DICIEMBRE 2025</h3>
      <div class="partido" data-local="GANADOR SF1" data-visita="GANADOR SF2">
        <span class="equipo">GANADOR SF1</span>
        <span class="vs">VS</span>
        <span class="equipo">GANADOR SF2</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
    </div>

    <div class="dia" id="dia31">
      <h3 onclick="toggleDia('dia31')">ü•à TERCER LUGAR - 31 DICIEMBRE 2025</h3>
      <div class="partido" data-local="PERDEDOR SF1" data-visita="PERDEDOR SF2">
        <span class="equipo">PERDEDOR SF1</span>
        <span class="vs">VS</span>
        <span class="equipo">PERDEDOR SF2</span>
        <span class="goles">
          <input type="number" min="0" value="0" class="gl">
          -
          <input type="number" min="0" value="0" class="gv">
        </span>
        <button class="guardar" onclick="guardarResultado(this)">Guardar</button>
        <button class="editar" onclick="editarResultado(this)">Editar</button>
        <span class="estado"></span>
      </div>
    </div>

    <!-- ACCIONES ADMIN -->
    <div class="acciones-admin">
      <h3>üõ†Ô∏è Acciones de Administrador</h3>
      <input type="password" id="passAccion" placeholder="Contrase√±a para confirmar" style="width:200px;" />
      <button class="reiniciar" onclick="reiniciarTabla()">üóëÔ∏è Reiniciar TODOS los datos</button>
      <p style="margin-top:10px; font-size:0.9em; color:#555;">
        ‚ö†Ô∏è Esto borrar√° todos los resultados y reiniciar√° la tabla de posiciones.
      </p>
      <a href="https://jjfutbol.lat/barra/" class="link-tabla" target="_blank">üëÅÔ∏è Ver Tabla P√∫blica</a>
    </div>
  </div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>
<script src="firebase-config.js"></script>

<script>
  const PASSWORD = "1234"; // ‚Üê Cambia esto si quieres otra

  function verificarPass() {
    if (document.getElementById('pass').value === PASSWORD) {
      document.getElementById('panel').style.display = 'block';
    } else {
      alert("‚ùå Contrase√±a incorrecta");
    }
  }

  if (!firebase.apps.length) {
    firebase.initializeApp(firebaseConfig);
  }
  const db = firebase.database();
  const equiposRef = db.ref('equipos');

  // === Funci√≥n para guardar ===
  function guardarResultado(btn) {
    const partido = btn.closest('.partido');
    const local = partido.dataset.local;
    const visita = partido.dataset.visita;
    const gl = parseInt(partido.querySelector('.gl').value) || 0;
    const gv = parseInt(partido.querySelector('.gv').value) || 0;

    if (isNaN(gl) || isNaN(gv)) return;

    equiposRef.transaction(current => {
      if (!current) current = {};
      if (!current[local]) current[local] = { pj:0, pg:0, pe:0, pp:0, gf:0, gc:0 };
      if (!current[visita]) current[visita] = { pj:0, pg:0, pe:0, pp:0, gf:0, gc:0 };

      current[local].pj++; current[local].gf += gl; current[local].gc += gv;
      current[visita].pj++; current[visita].gf += gv; current[visita].gc += gl;

      if (gl > gv) { current[local].pg++; current[visita].pp++; }
      else if (gl < gv) { current[visita].pg++; current[local].pp++; }
      else { current[local].pe++; current[visita].pe++; }

      return current;
    }).then(() => {
      const estado = partido.querySelector('.estado');
      estado.textContent = "‚úÖ Guardado";
      estado.style.color = "green";
      setTimeout(() => estado.textContent = "", 2000);
    });
  }

  // === Funci√≥n para EDITAR ===
  function editarResultado(btn) {
    const partido = btn.closest('.partido');
    const local = partido.dataset.local;
    const visita = partido.dataset.visita;
    const gl = parseInt(partido.querySelector('.gl').value) || 0;
    const gv = parseInt(partido.querySelector('.gv').value) || 0;

    if (isNaN(gl) || isNaN(gv)) {
      alert("Ingresa goles v√°lidos");
      return;
    }

    equiposRef.once('value').then(snapshot => {
      const data = snapshot.val() || {};
      const eqLocal = data[local] || { pj:0, pg:0, pe:0, pp:0, gf:0, gc:0 };
      const eqVisita = data[visita] || { pj:0, pg:0, pe:0, pp:0, gf:0, gc:0 };

      // Revertir el partido anterior (solo si ya se hab√≠a jugado)
      if (eqLocal.pj > 0) {
        // Reiniciar ambos equipos a 0 partidos
        eqLocal.pj = 0; eqLocal.pg = 0; eqLocal.pe = 0; eqLocal.pp = 0; eqLocal.gf = 0; eqLocal.gc = 0;
        eqVisita.pj = 0; eqVisita.pg = 0; eqVisita.pe = 0; eqVisita.pp = 0; eqVisita.gf = 0; eqVisita.gc = 0;
      }

      // Aplicar nuevo resultado
      eqLocal.pj = 1; eqLocal.gf = gl; eqLocal.gc = gv;
      eqVisita.pj = 1; eqVisita.gf = gv; eqVisita.gc = gl;

      if (gl > gv) { eqLocal.pg = 1; eqVisita.pp = 1; }
      else if (gl < gv) { eqVisita.pg = 1; eqLocal.pp = 1; }
      else { eqLocal.pe = 1; eqVisita.pe = 1; }

      data[local] = eqLocal;
      data[visita] = eqVisita;

      equiposRef.set(data).then(() => {
        const estado = partido.querySelector('.estado');
        estado.textContent = "‚úèÔ∏è Editado";
        estado.style.color = "#856404";
        setTimeout(() => estado.textContent = "", 2000);
      });
    });
  }

  // === Funci√≥n para REINICIAR toda la tabla ===
  function reiniciarTabla() {
    const pass = document.getElementById('passAccion').value;
    if (pass !== PASSWORD) {
      alert("‚ùå Contrase√±a incorrecta para reiniciar");
      return;
    }

    if (!confirm("‚ö†Ô∏è ¬øEst√°s seguro? Se borrar√°n todos los resultados.")) return;

    // Crear estructura limpia con todos los equipos a 0
    const equiposOficiales = [
      "CD COPALA", "MACHINE POWER", "CD POZAHUALCO", "LA GUADALUPE",
      "BARRA DE TECOANAPA", "PLAYA AZUL", "CD POLYMAR", "JUVENTUS",
      "OMETEPEC FC", "LA YEGUADA", "UNION MARQUELIA", "UNION SLAGRO",
      "CD JUCHITAN", "SAN NICOLAS", "CDM", "CD ISLALTEPEC",
      "CD INDEPENDIENTE", "BACHILLERES FC", "AGUA ZARCA",
      "GANADOR GRUPO A", "GANADOR GRUPO B", "GANADOR GRUPO C", "GANADOR GRUPO D",
      "GANADOR SF1", "GANADOR SF2", "PERDEDOR SF1", "PERDEDOR SF2"
    ];

    const nuevaTabla = {};
    equiposOficiales.forEach(eq => {
      nuevaTabla[eq] = { pj: 0, pg: 0, pe: 0, pp: 0, gf: 0, gc: 0 };
    });

    equiposRef.set(nuevaTabla).then(() => {
      alert("‚úÖ Tabla reiniciada exitosamente");
      // Reiniciar campos de goles
      document.querySelectorAll('.gl, .gv').forEach(input => input.value = 0);
      document.querySelectorAll('.estado').forEach(span => span.textContent = "");
    });
  }

  // === Funci√≥n para mostrar/ocultar d√≠as ===
  function toggleDia(id) {
    const dia = document.getElementById(id);
    dia.classList.toggle('open');
  }
</script>

</body>
</html>
