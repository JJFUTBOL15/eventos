<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>XLVIII Regional Decembrino - Barra de tecoanapa</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, sans-serif;
      background: url('https://i.ibb.co/SwZN1y0H/5059953714075994908.jpg') center/cover fixed;
      color: #fff;
      min-height: 100vh;
      padding: 15px;
    }
    .container {
      max-width: 1100px;
      margin: auto;
      background: rgba(0, 0, 0, 0.75);
      border-radius: 12px;
      padding: 20px;
      backdrop-filter: blur(4px);
    }
    h1 {
      text-align: center;
      margin: 10px 0 15px;
      font-size: 1.8em;
      color: #ffd700;
      text-shadow: 0 0 6px #000;
    }
    .subtitulo {
      text-align: center;
      margin-bottom: 20px;
      color: #ccc;
      font-size: 1.1em;
    }
    .grupo {
      margin: 25px 0;
      background: rgba(255,255,255,0.1);
      padding: 15px;
      border-radius: 10px;
    }
    .grupo h2 {
      text-align: center;
      margin-bottom: 15px;
      color: #ffd700;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 10px 0;
    }
    th, td {
      padding: 10px;
      text-align: center;
      border: 1px solid #555;
    }
    th {
      background: #c00;
      color: white;
    }
    tr:nth-child(even) {
      background: rgba(255,255,255,0.08);
    }
    tr:hover {
      background: rgba(255,215,0,0.15);
    }
    .patrocinadores {
      text-align: center;
      margin: 30px 0;
    }
    .patrocinadores img {
      height: 60px;
      margin: 0 15px 15px;
      border-radius: 8px;
    }
    .patrocinadores a {
      color: #ffd700;
      text-decoration: none;
      display: inline-block;
      margin: 0 10px;
      font-weight: bold;
    }
    .patrocinadores a:hover {
      text-decoration: underline;
    }
    .nota {
      text-align: center;
      margin-top: 20px;
      font-size: 0.9em;
      color: #aaa;
    }
    .sin-datos {
      text-align: center;
      padding: 15px;
      color: #aaa;
    }

    /* Estilos para el bracket de eliminatorias */
    .bracket-container {
      background: rgba(0, 0, 0, 0.6);
      padding: 20px;
      border-radius: 10px;
      margin: 25px 0;
    }
    .bracket-title {
      text-align: center;
      color: #ffd700;
      margin-bottom: 20px;
      font-size: 1.5em;
    }
    .bracket {
      display: flex;
      justify-content: space-around;
      align-items: center;
      gap: 20px;
      padding: 15px;
    }
    .semifinal {
      display: flex;
      flex-direction: column;
      gap: 10px;
      width: 250px;
    }
    .partido {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: rgba(255,255,255,0.1);
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #555;
    }
    .equipo {
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: bold;
      min-width: 120px;
    }
    .vs {
      color: #ccc;
      font-weight: bold;
    }
    .goles {
      display: flex;
      align-items: center;
      gap: 5px;
    }
    .final {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px;
      margin-top: 30px;
    }
    .tercer-lugar {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px;
      margin-top: 20px;
      font-size: 0.9em;
      color: #ccc;
    }
    .linea {
      position: relative;
      width: 100%;
      height: 2px;
      background: #ccc;
      margin: 10px 0;
    }
    .linea::before {
      content: "";
      position: absolute;
      top: -5px;
      left: 50%;
      transform: translateX(-50%);
      width: 10px;
      height: 10px;
      background: #ccc;
      border-radius: 50%;
    }
    .linea::after {
      content: "";
      position: absolute;
      bottom: -5px;
      left: 50%;
      transform: translateX(-50%);
      width: 10px;
      height: 10px;
      background: #ccc;
      border-radius: 50%;
    }
  </style>
</head>
<body>

<div class="container">
  <h1>XLVIII REGIONAL DECEMBRINO DE F√öTBOL</h1>
  <div class="subtitulo">
    Costa Chica de Guerrero, M√©xico<br>
    <strong>Fase de Grupos: 20 al 28 de diciembre 2025</strong>
  </div>

  <!-- Patrocinadores -->
  <div class="patrocinadores">
    <a href="https://palapalasirenita.lol/hostal-el-anzuelo.html" target="_blank">
      <img src="https://i.ibb.co/v41wsS3R/5026483222916827919-removebg-preview.png" alt="Hostal El Anzuelo">
    </a>
    <a href="https://palapalasirenita.lol/" target="_blank">
      <img src="https://i.ibb.co/gXdTC9H/IMG-6725-removebg-preview.png" alt="Palapa La Sirenita">
    </a>
    <br>
    <a href="https://palapalasirenita.lol/hostal-el-anzuelo.html" target="_blank">üè® Hostal El Anzuelo</a>
    <a href="https://palapalasirenita.lol/" target="_blank">üç§ Palapa La Sirenita</a>
  </div>

  <!-- Bracket de Eliminatorias (arriba) -->
  <div id="bracket-container" class="bracket-container" style="display:none;">
    <div class="bracket-title">üèÜ ELIMINATORIAS - CUARTOS DE FINAL</div>
    <div class="bracket">
      <div class="semifinal" id="sf1">
        <div class="partido">
          <div class="equipo" id="sf1-local">GANADOR GRUPO A</div>
          <span class="vs">VS</span>
          <div class="equipo" id="sf1-visita">GANADOR GRUPO C</div>
          <div class="goles" id="sf1-goles">-</div>
        </div>
      </div>
      <div class="semifinal" id="sf2">
        <div class="partido">
          <div class="equipo" id="sf2-local">GANADOR GRUPO B</div>
          <span class="vs">VS</span>
          <div class="equipo" id="sf2-visita">GANADOR GRUPO D</div>
          <div class="goles" id="sf2-goles">-</div>
        </div>
      </div>
    </div>
    <div class="linea"></div>
    <div class="final">
      <div class="partido" id="final">
        <div class="equipo" id="final-local">GANADOR SF1</div>
        <span class="vs">VS</span>
        <div class="equipo" id="final-visita">GANADOR SF2</div>
        <div class="goles" id="final-goles">-</div>
      </div>
    </div>
    <div class="tercer-lugar">
      <div class="partido" id="tercer-lugar">
        <div class="equipo" id="tl-local">PERDEDOR SF1</div>
        <span class="vs">VS</span>
        <div class="equipo" id="tl-visita">PERDEDOR SF2</div>
        <div class="goles" id="tl-goles">-</div>
      </div>
    </div>
  </div>

  <!-- Grupos -->
  <div id="grupos-container">
    <!-- Se llenar√° con JavaScript -->
  </div>

  <div class="nota">
    ‚úÖ Actualizaci√≥n en tiempo real ‚Ä¢ Datos gestionados en Palapa la sirenita
  </div>
</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>
<script src="firebase-config.js"></script>

<script>
  // Definici√≥n de grupos
  const GRUPOS = {
    A: ["BARRA DE TECOANAPA", "PLAYA AZUL", "CD POZAHUALCO", "LA GUADALUPE"],
    B: ["OMETEPEC FC", "LA YEGUADA", "CD POLYMAR", "JUVENTUS", "AGUA ZARCA"],
    C: ["CD JUCHITAN", "SAN NICOLAS", "UNION MARQUELIA", "UNION SLAGRO", "BACHILLERES FC"],
    D: ["CD COPALA", "MACHINE POWER", "CDM", "CD ISLALTEPEC", "CD INDEPENDIENTE"]
  };

  if (!firebase.apps.length) {
    firebase.initializeApp(firebaseConfig);
  }
  const db = firebase.database();
  const equiposRef = db.ref('equipos');

  function renderizarGrupos(equipos) {
    const container = document.getElementById('grupos-container');
    container.innerHTML = '';

    for (const [letra, listaEquipos] of Object.entries(GRUPOS)) {
      // Filtrar y ordenar equipos del grupo
      const equiposGrupo = listaEquipos.map(nombre => {
        const datos = equipos[nombre] || { pj: 0, pg: 0, pe: 0, pp: 0, gf: 0, gc: 0 };
        const pts = (datos.pg || 0) * 3 + (datos.pe || 0);
        const dif = (datos.gf || 0) - (datos.gc || 0);
        return { nombre, ...datos, pts, dif };
      }).sort((a, b) => 
        b.pts - a.pts || 
        b.dif - a.dif || 
        b.gf - a.gf || 
        a.nombre.localeCompare(b.nombre)
      );

      // Crear secci√≥n del grupo
      const grupoDiv = document.createElement('div');
      grupoDiv.className = 'grupo';
      grupoDiv.innerHTML = `
        <h2>üèÜ GRUPO ${letra}</h2>
        <table>
          <thead>
            <tr>
              <th>Pos</th>
              <th>Equipo</th>
              <th>PJ</th>
              <th>PG</th>
              <th>PE</th>
              <th>PP</th>
              <th>GF</th>
              <th>GC</th>
              <th>Dif</th>
              <th>Pts</th>
            </tr>
          </thead>
          <tbody id="grupo-${letra}">
            ${equiposGrupo.length === 0 || equiposGrupo.every(e => e.pj === 0) 
              ? `<tr><td colspan="10" class="sin-datos">Sin partidos jugados</td></tr>`
              : equiposGrupo.map((e, i) => `
                <tr>
                  <td>${i + 1}</td>
                  <td>${e.nombre}</td>
                  <td>${e.pj || 0}</td>
                  <td>${e.pg || 0}</td>
                  <td>${e.pe || 0}</td>
                  <td>${e.pp || 0}</td>
                  <td>${e.gf || 0}</td>
                  <td>${e.gc || 0}</td>
                  <td>${e.dif}</td>
                  <td>${e.pts}</td>
                </tr>
              `).join('')
            }
          </tbody>
        </table>
      `;
      container.appendChild(grupoDiv);
    }

    // Renderizar bracket si hay datos de eliminatorias
    renderizarBracket(equipos);
  }

  function renderizarBracket(equipos) {
    const bracketContainer = document.getElementById('bracket-container');
    const sf1Local = document.getElementById('sf1-local');
    const sf1Visita = document.getElementById('sf1-visita');
    const sf1Goles = document.getElementById('sf1-goles');
    const sf2Local = document.getElementById('sf2-local');
    const sf2Visita = document.getElementById('sf2-visita');
    const sf2Goles = document.getElementById('sf2-goles');
    const finalLocal = document.getElementById('final-local');
    const finalVisita = document.getElementById('final-visita');
    const finalGoles = document.getElementById('final-goles');
    const tlLocal = document.getElementById('tl-local');
    const tlVisita = document.getElementById('tl-visita');
    const tlGoles = document.getElementById('tl-goles');

    // Obtener los equipos clasificados (1¬∫ y 2¬∫ de cada grupo)
    const clasificados = {};
    for (const [letra, listaEquipos] of Object.entries(GRUPOS)) {
      const equiposGrupo = listaEquipos.map(nombre => {
        const datos = equipos[nombre] || { pj: 0, pg: 0, pe: 0, pp: 0, gf: 0, gc: 0 };
        const pts = (datos.pg || 0) * 3 + (datos.pe || 0);
        const dif = (datos.gf || 0) - (datos.gc || 0);
        return { nombre, ...datos, pts, dif };
      }).sort((a, b) => 
        b.pts - a.pts || 
        b.dif - a.dif || 
        b.gf - a.gf || 
        a.nombre.localeCompare(b.nombre)
      );

      if (equiposGrupo.length >= 2) {
        clasificados[letra] = {
          primero: equiposGrupo[0].nombre,
          segundo: equiposGrupo[1].nombre
        };
      }
    }

    // Si hay clasificados, mostrar el bracket
    if (Object.keys(clasificados).length === 4) {
      bracketContainer.style.display = 'block';

      // Semifinales
      sf1Local.textContent = clasificados.A?.primero || "GANADOR GRUPO A";
      sf1Visita.textContent = clasificados.C?.primero || "GANADOR GRUPO C";
      sf2Local.textContent = clasificados.B?.primero || "GANADOR GRUPO B";
      sf2Visita.textContent = clasificados.D?.primero || "GANADOR GRUPO D";

      // Final y tercer lugar (si hay resultados)
      const sf1Result = equipos["GANADOR GRUPO A"] && equipos["GANADOR GRUPO C"] ? 
        `${equipos["GANADOR GRUPO A"].gf || 0} - ${equipos["GANADOR GRUPO C"].gc || 0}` : "-";
      const sf2Result = equipos["GANADOR GRUPO B"] && equipos["GANADOR GRUPO D"] ? 
        `${equipos["GANADOR GRUPO B"].gf || 0} - ${equipos["GANADOR GRUPO D"].gc || 0}` : "-";

      sf1Goles.textContent = sf1Result;
      sf2Goles.textContent = sf2Result;

      // Final
      finalLocal.textContent = "GANADOR SF1"; // Aqu√≠ podr√≠as poner el ganador real si lo guardas
      finalVisita.textContent = "GANADOR SF2";
      finalGoles.textContent = equipos["GANADOR SF1"] && equipos["GANADOR SF2"] ? 
        `${equipos["GANADOR SF1"].gf || 0} - ${equipos["GANADOR SF2"].gc || 0}` : "-";

      // Tercer lugar
      tlLocal.textContent = "PERDEDOR SF1";
      tlVisita.textContent = "PERDEDOR SF2";
      tlGoles.textContent = equipos["PERDEDOR SF1"] && equipos["PERDEDOR SF2"] ? 
        `${equipos["PERDEDOR SF1"].gf || 0} - ${equipos["PERDEDOR SF2"].gc || 0}` : "-";

    } else {
      bracketContainer.style.display = 'none';
    }
  }

  equiposRef.on('value', snapshot => {
    renderizarGrupos(snapshot.val() || {});
  });
</script>

</body>
</html>
