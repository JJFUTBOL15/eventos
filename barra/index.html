<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>XLVIII Regional Decembrino - JJFUTBOL</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, sans-serif;
      background: url('https://i.ibb.co/SwZN1y0H/5059953714075994908.jpg') center/cover fixed;
      color: #fff;
      min-height: 100vh;
      padding: 20px;
    }
    .container {
      max-width: 1100px;
      margin: auto;
      background: rgba(0, 0, 0, 0.75);
      border-radius: 12px;
      padding: 20px;
      backdrop-filter: blur(4px);
    }
    h1 {
      text-align: center;
      margin: 15px 0;
      font-size: 1.8em;
      color: #ffd700;
      text-shadow: 0 0 6px #000;
    }
    .subtitulo {
      text-align: center;
      margin-bottom: 20px;
      color: #ccc;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
    }
    th, td {
      padding: 12px;
      text-align: center;
      border: 1px solid #555;
    }
    th {
      background: #c00;
      color: white;
      position: sticky;
      top: 0;
    }
    tr:nth-child(even) {
      background: rgba(255,255,255,0.1);
    }
    tr:hover {
      background: rgba(255,215,0,0.15);
    }
    .patrocinadores {
      text-align: center;
      margin: 30px 0;
    }
    .patrocinadores img {
      height: 60px;
      margin: 0 15px 15px;
      border-radius: 8px;
    }
    .patrocinadores a {
      color: #ffd700;
      text-decoration: none;
      display: inline-block;
      margin: 0 10px;
      font-weight: bold;
    }
    .patrocinadores a:hover {
      text-decoration: underline;
    }
    .nota {
      text-align: center;
      margin-top: 20px;
      font-size: 0.9em;
      color: #aaa;
    }
  </style>
</head>
<body>

<div class="container">
  <h1>XLVIII REGIONAL DECEMBRINO DE F√öTBOL</h1>
  <div class="subtitulo">Costa Chica de Guerrero, M√©xico<br>
    <strong>Rol de Juegos Fase Grupos: 20 al 28 de diciembre 2025</strong>
  </div>

  <!-- Patrocinadores -->
  <div class="patrocinadores">
    <a href="https://palapalasirenita.lol/hostal-el-anzuelo.html" target="_blank">
      <img src="https://i.ibb.co/v41wsS3R/5026483222916827919-removebg-preview.png" alt="Hostal El Anzuelo">
    </a>
    <a href="https://palapalasirenita.lol/" target="_blank">
      <img src="https://i.ibb.co/gXdTC9H/IMG-6725-removebg-preview.png" alt="Palapa La Sirenita">
    </a>
    <br>
    <a href="https://palapalasirenita.lol/hostal-el-anzuelo.html" target="_blank">üè® Hostal El Anzuelo</a>
    <a href="https://palapalasirenita.lol/" target="_blank">üç§ Palapa La Sirenita</a>
  </div>

  <!-- Tabla de posiciones -->
  <table id="tablaPosiciones">
    <thead>
      <tr>
        <th>Pos</th>
        <th>Equipo</th>
        <th>PJ</th>
        <th>PG</th>
        <th>PE</th>
        <th>PP</th>
        <th>GF</th>
        <th>GC</th>
        <th>Dif</th>
        <th>Pts</th>
      </tr>
    </thead>
    <tbody id="cuerpoTabla">
      <tr><td colspan="10" style="text-align:center;">Cargando tabla de posiciones...</td></tr>
    </tbody>
  </table>

  <div class="nota">
    Actualizaci√≥n en tiempo real ‚Ä¢ Datos gestionados en JJFUTBOL
  </div>
</div>

<!-- Firebase SDK (versi√≥n compat para sitios est√°ticos) -->
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>

<!-- Tu configuraci√≥n -->
<script src="firebase-config.js"></script>

<script>
  console.log("üöÄ Iniciando conexi√≥n con Firebase...");

  // Inicializar Firebase si no lo est√°
  if (!firebase.apps.length) {
    firebase.initializeApp(firebaseConfig);
    console.log("‚úÖ Firebase inicializado");
  }

  const db = firebase.database();
  const equiposRef = db.ref('equipos');

  function renderizarTabla(equipos) {
    console.log("üìä Datos recibidos:", equipos);

    const cuerpo = document.getElementById('cuerpoTabla');
    if (!equipos || Object.keys(equipos).length === 0) {
      cuerpo.innerHTML = `<tr><td colspan="10" style="text-align:center;">Sin datos a√∫n</td></tr>`;
      return;
    }

    const lista = Object.entries(equipos).map(([nombre, datos]) => {
      const pts = (datos.pg || 0) * 3 + (datos.pe || 0);
      const dif = (datos.gf || 0) - (datos.gc || 0);
      return { nombre, ...datos, pts, dif };
    }).sort((a, b) => 
      b.pts - a.pts || 
      b.dif - a.dif || 
      b.gf - a.gf || 
      a.nombre.localeCompare(b.nombre)
    );

    cuerpo.innerHTML = lista.map((e, i) => `
      <tr>
        <td>${i + 1}</td>
        <td>${e.nombre}</td>
        <td>${e.pj || 0}</td>
        <td>${e.pg || 0}</td>
        <td>${e.pe || 0}</td>
        <td>${e.pp || 0}</td>
        <td>${e.gf || 0}</td>
        <td>${e.gc || 0}</td>
        <td>${e.dif}</td>
        <td>${e.pts}</td>
      </tr>
    `).join('');

    console.log(`‚úÖ Tabla renderizada con ${lista.length} equipos`);
  }

  // Escuchar cambios en tiempo real
  equiposRef.on('value', snapshot => {
    console.log("üì° Cambio detectado en Firebase");
    renderizarTabla(snapshot.val() || {});
  });
</script>

</body>
</html>
